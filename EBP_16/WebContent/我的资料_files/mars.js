/*! mars 2017-05-24 04:05:58 */
!function(){if(!window.Mar){window.T0=(new Date).getTime(),window.Mar=function(){},Mar.stringify=function(a){function b(a){return'"'+a.replace(e,function(a){var b=f[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"'}function c(a){return a<10?"0"+a:a}function d(a,e){var f,g,h,i,j=e[a],k=typeof j;switch(j&&"object"==typeof j&&"function"==typeof j.toJSON&&(j=j.toJSON(a),k=typeof j),k){case"string":return b(j);case"number":return isFinite(j)?String(j):"null";case"boolean":return String(j);case"object":if(!j)return"null";switch(Object.prototype.toString.call(j)){case"[object Date]":return isFinite(j.valueOf())?'"'+j.getUTCFullYear()+"-"+c(j.getUTCMonth()+1)+"-"+c(j.getUTCDate())+"T"+c(j.getUTCHours())+":"+c(j.getUTCMinutes())+":"+c(j.getUTCSeconds())+'Z"':"null";case"[object Array]":for(h=j.length,i=[],f=0;f<h;f++)i.push(d(f,j)||"null");return"["+i.join(",")+"]";default:i=[];for(f in j)Object.prototype.hasOwnProperty.call(j,f)&&(g=d(f,j),g&&i.push(b(f)+":"+g));return"{"+i.join(",")+"}"}}}if(window.JSON&&window.JSON.stringify)return window.JSON.stringify(a);var e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return d("",{"":a})};var a;Mar.Base={},a=Mar.Base,a.local=document.location,a.domain=document.domain,a.docEle=document.documentElement,a.context="css1compat"===document.compatMode.toLowerCase()?document.body:a.docEle,a.monitor=window.screen,a.href=a.local.href,a.url=escape(a.href),a.pn=a.local.pathname.toLowerCase(),a.hn=a.local.hostname.toLowerCase(),a.ref=escape(document.referrer),a.cw=a.docEle.clientWidth,a.ch=a.docEle.clientHeight,a.res=a.monitor.width+"*"+a.monitor.height,a.col=a.monitor.colorDepth,a.w=a.context.width,a.h=a.context.height,a.nav=escape(navigator.userAgent.toLowerCase()),a.ce=navigator.cookieEnabled?1:0,a.title=escape(document.title)}}(),Mar.Util={detect:function(){var a,b,c,d=!1,e=window.navigator.userAgent;return/MSIE/.test(e)?(b="MSIE",/IEMobile/.test(e)&&(d=!0),c=/MSIE \d+[.]\d+/.exec(e)[0].split(" ")[1]):navigator.userAgent.match(/Trident.*rv[ :]*11\./)?(b="MSIE",c=11):/Chrome/.test(e)?(b="Chrome",c=/Chrome\/[\d\.]+/.exec(e)[0].split("/")[1]):/Opera/.test(e)?(b="Opera",(/mini/.test(e)||/Mobile/.test(e))&&(d=!0)):/Android/.test(e)?(b="Android Webkit Browser",d=!0):/Firefox/.test(e)?(b="Firefox",/Fennec/.test(e)&&(d=!0),c=/Firefox\/[\.\d]+/.exec(e)[0].split("/")[1]):/Safari/.test(e)&&(b="Safari",(/iPhone/.test(e)||/iPad/.test(e)||/iPod/.test(e))&&(d=!0)),c||(c=/Version\/[\.\d]+/.exec(e),c=c?c[0].split("/")[1]:void 0),a={browser:b,version:c,mobile:d}},isElement:function(a){return!(!a||"function"!=typeof HTMLElement&&"object"!=typeof HTMLElement||!(a instanceof HTMLElement))||!(!a||!a.nodeType||1!==a.nodeType)},getProtocal:function(){return document.location.href.toLowerCase().indexOf("https://")!==-1?"https://":"http://"},encryptCid:function(a){var b=a.split("_"),c=b[0],d=b[1];if(!c||!d)return a;for(var e=0,f=c.length,g=0;g<f;g++)e+=parseInt(c[g]);for(var h=e%32,i=e,j=d.length,g=0;g<j;g++)g!==h&&(i+=parseInt(d[g],16));var k=(i%16).toString(16);return c+"_"+d.substr(0,h)+k.toString()+d.substr(h+1,j)},getParameterByName:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b="[\\?&]"+a+"=([^&#]*)",c=new RegExp(b),d=c.exec(window.location.search);return null==d?"":decodeURIComponent(d[1].replace(/\+/g," "))},getConfig:function(a){return"MarConfig"in window&&window.MarConfig&&window.MarConfig[a]?window.MarConfig[a]:""},pad:function(a,b){for(var c=a.toString().length;c<b;)a="0"+a,c++;return a},getDomain:function(){var a,b=document.domain.toLowerCase();return a=b.indexOf("vipshop.com")!==-1?"vipshop.com":b.indexOf("appvipshop.com")!==-1?"appvipshop.com":b.indexOf("vipglobal.hk")!==-1?"vipglobal.hk":"vip.com"},parseURL:function(a){var b=document.createElement("a");return b.href=a,{source:a,protocol:b.protocol.replace(":",""),host:b.hostname,port:b.port,query:b.search,params:function(){for(var a,c={},d=b.search.replace(/^\?/,"").split("&"),e=d.length,f=0;f<e;f++)d[f]&&(a=d[f].split("="),c[a[0]]=a[1]);return c}(),file:(b.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:b.hash.replace("#",""),path:b.pathname.replace(/^([^\/])/,"/$1"),relative:(b.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:b.pathname.replace(/^\//,"").split("/")}},getTimeSpan:function(){return parseInt(Mar.Util.getTimeSpanMillisecond()/1e3)},getTimeSpanMillisecond:function(){return(new Date).getTime()},Debounce:function(a,b,c){var d,e,f,g,h,i=Date.now||function(){return(new Date).getTime()},j=function(){var k=i()-g;k<b&&k>=0?d=setTimeout(j,b-k):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=i();var k=c&&!d;return d||(d=setTimeout(j,b)),k&&(h=a.apply(f,e),f=e=null),h}},getQueryStringByName:function(a,b){var c=b.match(new RegExp("[?&]"+a+"=([^&^#]+)","i"));return null==c||c.length<1?"":c[1]},getMetaByName:function(a){var b=document.getElementsByTagName("meta");for(i in b)if("undefined"!=typeof b[i].name&&b[i].name.toLowerCase()==a)return b[i].content;return null},isDetailPage:function(a){var b=!1;return!a||a.indexOf("shop.vipshop.com/detail")===-1&&a.indexOf("www.vip.com/detail")===-1&&a.indexOf("detail.vipglobal.hk")===-1||(b=!0),b}},Mar.Random={guid:function(){for(var a=0,b=[];a<8;)b.push((65536*(1+Math.random())|0).toString(16).substring(1)),a++;return b.join("").toUpperCase()},guid2:function(){function a(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},guid3:function(){function a(a,c,d){var e=b(a,16),f=new Array,g="",h=0;for(h=0;h<e.length;h++)f.push(e.substring(h,h+1));for(h=Math.floor(c/4);h<=Math.floor(d/4);h++)g+=f[h]&&""!=f[h]?f[h]:"0";return g}function b(a,b){return a.toString(b)}function c(a){return Math.floor(Math.random()*(a+1))}var d=new Date(1582,10,15,0,0,0,0),e=new Date,f=e.getTime()-d.getTime(),g=a(f,0,31),h=a(f,32,47),i=a(f,48,59)+"1",j=a(c(4095),0,7),k=a(c(4095),0,7),l=a(c(8191),0,7)+a(c(8191),8,15)+a(c(8191),0,7)+a(c(8191),8,15)+a(c(8191),0,15);return g+h+i+j+k+l},rand:function(a){var b="0123456789abcdef",c="",d=0;for(a=a||32;d<a;d++)c+=b.charAt(Math.ceil(1e8*Math.random())%b.length);return c}},Mar.Cookie={get:function(a){var b,c=document.cookie,d=c.indexOf(a+"=");if(d!==-1)return d+=a.length+1,b=c.indexOf(";",d),unescape(c.substring(d,b===-1?c.length:b))},set:function(a,b,c){var d=Mar.Util.getDomain();0===c?document.cookie=a+"="+escape(b)+";path=/;domain=."+d:(date=new Date,date.setTime(date.getTime()+24*c*3600*1e3),document.cookie=a+"="+escape(b)+";expires="+date.toGMTString()+";path=/;domain=."+d)},del:function(a){var b=Mar.Util.getDomain();document.cookie=a+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT; path=/;"+(b?"domain="+b:"")}},function(a){Mar.PageIdIndex=0,Mar.PageId=Mar.PageId?Mar.PageId+"_"+ ++Mar.PageIdIndex:(new Date).getTime()+"_"+Mar.Random.guid2(),Mar.Biz=function(){var a=Mar.Cookie,b=a.get,c=a.set,d=a.del,e=(Mar.Base,0),f=0,g="",h=b("VipLID"),i=b("PHPSESSID"),j=b("mars_cid")||b("cookie_id"),k=b("mars_pid")||b("page_id"),l=b("mars_sid")||Mar.Random.rand(),m=b("visit_id")||Mar.Random.guid(),n=b("tmp_mars_cid"),o=b("vip_wh"),p=window.mars_var?Mar.stringify(window.mars_var):"-",q=b("vip_qe"),r=b("vip_qt"),s=window.vip_xe||"",t=window.vip_xt||"";return h&&i&&unescape(h).split("|")[0]===i&&(e=1),!j&&n?j=n:(!j||32!==(j+"").length&&46!==(j+"").length)&&(j=Mar.Util.encryptCid(Mar.Util.pad((new Date).getTime(),13)+"_"+Mar.Random.rand()),f=1),k=k||0,d("cookie_id"),d("page_id"),d("mars_cid"),c("mars_pid",k,732),c("mars_cid",j,732),c("mars_sid",l,0),c("visit_id",m,.5/24),{cid:j,sid:l,pid:k,vid:m,wh:o,mvar:p,newbie:f,isLog:e,orderId:g,pageId:Mar.PageId,vip_qe:q,vip_qt:r,vip_xe:s,vip_xt:t}}}(jQuery),Mar._Request={send:function(a,b,c){var d=Mar.Base,e=Mar.Biz(),f=Mar.Util.getDomain();c&&(e.mvar=Mar.stringify(c)),a=Mar.Util.getProtocal()+"mar."+f+a+"&mars_cid="+e.cid+"&mars_sid="+e.sid+"&pi="+e.pid+"&mars_vid="+e.vid+"&mars_var="+e.mvar+"&lg="+e.isLog+"&wh="+e.wh+"&in="+e.newbie+"&sn="+e.orderId+"&url="+d.url+"&sr="+d.res+"&rf="+d.ref+"&bw="+d.cw+"&bh="+d.ch+"&sc="+d.col+"&bv="+d.nav+"&ce="+d.ce+"&vs=&title="+d.title+"&tab_page_id="+e.pageId+"&vip_qe="+e.vip_qe+"&vip_qt="+e.vip_qt+"&vip_xe="+e.vip_xe+"&vip_xt="+e.vip_xt,b&&(a+="&wap_ln="+e.wapln+"&wap_vs="+e.wapvs+"&wap_pwh="+e.wappwh+"&wap_wh="+e.wapwh+"&wap_id="+e.wapid+"&wap_from="+e.wapfrom+"&cps_u="+e.cpsu+"&m_vipruid="+e.ruid),a+="&r="+Math.random();var g=new Image(1,1);return g.onload=g.onerror=g.onabort=function(){g.onload=g.onerror=g.onabort=null,g=null},g.src=a,Mar}},Mar.Request=Mar._Request.send,Mar.PV=function(){return Mar.Request("/p?1=1"),Mar},Mar.Seed={typeEnum:{inputbutton:"button",inputsubmit:"button",inputtext:"inputText",inputinput:"inputText",inputradio:"radio",inputcheckbox:"checkbox",adownload:"download",a:"link",span:"span",button:"button"},data:{page_type:"",page_id:""},init:function(){var a=this;return this.data.page_type=Mar.Util.getConfig("pageType"),""==this.data.page_type&&(this.data.page_type="unknown"),this.data.page_id=this.data.page_type+"_"+window.T0,$("body").delegate("[mars_sead]:not(select)","click",function(){var b=$(this);a._onclick(b)}).delegate("select[mars_sead]","change",function(){a.request("select","change",$(this).attr("mars_sead"))}).delegate("[mars_sead_hover]","mouseenter",function(b){var c=$(this);a._onclick(c,"hover")}),Mar},_onclick:function(a,b){var c,d,e,f=a[0].tagName.toLowerCase();b=b||"click","a"===f?(c=a.attr("href"),e=this.typeEnum[f+(c?this._isDownload(c.toLowerCase()):"")]):(c=a.attr("type"),d=this.typeEnum[f+(c?c.toLowerCase():"")],e=d?d:f),this.request(e,b,"hover"!==b.toLowerCase()?a.attr("mars_sead"):a.attr("mars_sead_hover"))},request:function(a,b,c,d){this.requestUsePath("/c",a,b,c,d)},requestUsePath:function(a,b,c,d,e,f){var g=(new Date).getTime()-window.T0;Mar._Request.send(a+"?at="+g+"&et="+b+"&ed="+c+"&page_type="+this.data.page_type+"&page_id="+this.data.page_id+"&one="+encodeURIComponent(d)+"&data_mars="+f,"",e)},_isDownload:function(a){return/.*\.\w*$/.test(a)&&$.inArray(a.match(/\.(\w*)$/i)[1],["rar","zip","exe","doc","ppt","xls","docx","xlsx","pptx","sisx","apk"])!==-1?"download":""}},Mar.Report=function(){return window.MARS_EVENT_TYPE&&window.MARS_EVENT_VALUE&&Mar.Seed.request(MARS_EVENT_TYPE,escape(MARS_EVENT_VALUE),"",""),Mar},Mar.Screen=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o=Mar.Biz(),p=o.cid;p.substring(p.length-1,p.length);return p.lastIndexOf("0")!==p.length-1?Mar:(a=Mar.Base,b=[],c=(new Date).getTime(),e=$(window),f=e.width(),g=e.height(),h=a.context.scrollHeight,n=function(a,b){Mar.Request("/s?psn="+a+"&pt="+b+"&ph="+e.scrollTop()+"&pl="+h)},e.bind("scroll",function(){m=setTimeout(function(){clearTimeout(m),i=e.scrollTop(),j=Math.ceil(i/g),i>=(j-1)*g+.2*g&&(a.href.indexOf("shop.vipshop.com/detail")!==-1||a.href.indexOf("www.vip.com/detail")!==-1||a.href.indexOf("detail.vipglobal.hk")!==-1?(k!==j&&(clearInterval(l),l=setInterval(function(){n(j,3)},3e3)),k=j):$.inArray(j,b)===-1&&(d=(new Date).getTime(),n(j,(d-c)/1e3),c=d,b.push(j)))},500)}).bind("close",function(){i=e.scrollTop(),j=Math.ceil(i/g),d=(new Date).getTime(),n(j,(d-c)/1e3)}).bind("resize",function(){e=$(this),f=e.width(),g=e.height(),srollHeight=a.context.scrollHeight}),Mar)},Mar.Links=function(){var a=function(a,b){var c=$(this).hasOwnProperty("href"),d=c?$(this).attr("href"):"";d=d?d.replace("#","%26"):d,void 0===b?Mar.Request("/m?mx="+a.pageX+"&my="+a.pageY+"&href="+d):Mar.Request("/m?mx="+a.pageX+"&my="+a.pageY+"&clk_depth="+b+"&href="+d)};return $(document.body).click(function(b){var c=[],d=$(b.target),e=Mar.Util.detect();if("MSIE"!=e.browser||"7.0"!=e.version)for(;d&&d[0]&&d[0].tagName&&"body"!==d[0].tagName.toLowerCase()&&"!"!==d[0].tagName.toLowerCase();)8!==d[0].nodeType&&(c.push(d[0].tagName.toLowerCase()+(void 0===d.attr("class")?"":"."+d.attr("class"))+":"+d.prevAll(d[0].tagName).length),d=d.parent());a(b,c.reverse().join(" "))}),Mar},Mar.Performance=function(){var a,b,c,d,e=window.performance;return e&&(a=e.timing,b=e.navigation,d=setInterval(function(){if(0!==a.loadEventEnd){clearInterval(d),c={navigation:a.loadEventEnd-a.navigationStart,unloadEvent:a.unloadEventEnd-a.unloadEventStart,redirect:a.redirectEnd-a.redirectStart,domainLookup:a.domainLookupEnd-a.domainLookupStart,connect:a.connectEnd-a.connectStart,request:a.responseEnd-a.requestStart,response:a.responseEnd-a.responseStart,domLoading:a.domInteractive-a.domLoading,domInteractive:a.domContentLoadedEventEnd-a.domInteractive,domContentLoaded:a.domContentLoadedEventEnd-a.domContentLoadedEventStart,domComplete:a.domComplete-a.domLoading,loadEvent:a.loadEventEnd-a.loadEventStart,fetch:a.responseEnd-a.fetchStart,type:b.type,timeTofirstByte:a.responseStart-a.navigationStart};var f=0,g=0;if(e.getEntries){for(var h=performance.getEntries(),i={},j=0,k=h.length;j<k;j++){var l=h[j];if(i[l.initiatorType]||void 0==l.initiatorType){if(i[l.initiatorType]){var m=i[l.initiatorType].n,n=i[l.initiatorType].t;i[l.initiatorType]={n:++m,t:Math.ceil(n+l.duration)}}}else i[l.initiatorType]={n:1,t:Math.ceil(l.duration)}}f=h.length,g=Mar.stringify(i)}Mar.Request("/a?ps_nav="+c.navigation+"&ps_ule="+c.unloadEvent+"&ps_rd="+c.redirect+"&ps_dlu="+c.domainLookup+"&ps_con="+c.connect+"&ps_req="+c.request+"&ps_resp="+c.response+"&ps_dl="+c.domLoading+"&ps_di="+c.domInteractive+"&ps_dcl="+c.domContentLoaded+"&ps_dc="+c.domComplete+"&ps_le="+c.loadEvent+"&ps_ft="+c.fetch+"&ps_ty="+c.type+"&ps_ttfb="+c.timeTofirstByte+"&entry="+f+"&enType="+g)}},100)),Mar},Mar.Var=function(){if(document.location.href.indexOf("//www.vip.com/detail-")!==-1||document.location.href.indexOf("//list.vip.com/")!==-1||document.location.href.indexOf("//detail.vipglobal.hk/")!==-1||document.location.href.indexOf("//list.vipglobal.hk/")!==-1)var a,b=(window.mars_var?Mar.stringify(window.mars_var):"-",0),c=function(){return b<1?void b++:(clearInterval(a),void Mar.Request("/o?iso=1"))},a=window.setInterval(c,1e3);return Mar},Mar.Banner=function(){function a(a){var b=$(window).scrollTop(),c=$(window).height(),d=a.height()/2,e=a.offset().top,f=e+d;return b<=f&&b+c>=f}function b(a,b,e,f){var g=+new Date,h="";f&&(h="&one="+f),(g-c>500||e)&&Mar.Request("/y?page=index&adv=-99_"+a+"_"+b+"_1_1"+h),d=!1}var c=+new Date,d=!0;return $.Listeners&&$.Listeners.sub("index.switchable.ads").onsuccess(function(e){var f=e.adIdx+1,g=e.adId,h=e.adExpose,i=e.panelCls,j=e.onlyOneAd,k=a(i);j?($(window).on("scroll",function(){var e=a(i);e&&b(g,f,d,h),c=+new Date}).trigger("scroll"),$.Listeners.unsub("index.switchable.ads").success()):k&&(b(g,f,d,h),c=+new Date)}),Mar},Mar.Recommend=function(){function a(a,b){var c=d.scrollTop(),g=d.scrollLeft(),h=c+d.height(),i=g+d.width(),j=[];$("[mars-exposure-module]:visible").each(function(a,b){var d=$(b),e=d.offset(),k=e.top,l=d.height()/2,m=k+l;h>=m&&m>=c&&f(i,g,d,e)&&(j[j.length]=d.attr("mars-exposure-module"))}),j.length>0&&(e[e.length]={into_time:a,leave_time:b,sec:b-a,brands:j})}function b(){var a,b,c,d,f,g,h,i,j,k=e.length;if(0!==k){for(a=0;a<k;a++){for(g={},d=e[a],f=d.brands,c=f.length,b=0;b<c;b++)h=f[b].split("_"),j=h[1],i=g[j]=g[j]||[],i[i.length]={brand_id:h[2],brand_rank:h[3]};for(a in g)Mar.Request("/y?"+["into_time="+d.into_time,"leave_time="+d.leave_time,"sec="+d.sec,"brand_expose="+encodeURIComponent(Mar.stringify({page:h[0],module:a,brands:g[a]}))].join("&"))}e=[]}}var c=window,d=$(c),e=[],f=c.marOptions&&marOptions.tCjudge?function(a,b,c,d){var e=d.left,f=c.width()/2,g=e+f;return a>=g&&g>=b}:function(){return!0};return $(document).ready(function(){function c(){var b=+new Date;b-e>500&&a(e,b)}var e=+new Date;d.on("scroll",function(){c(),e=+new Date}).on("unload",function(){c(),b()}),setInterval(function(){b()},2e3)}),Mar},Mar.Exposure=function(){var a,b=this,c="",d=encodeURIComponent(document.title),e="-99",f=!1,g=0,h="active_te_resource_expose",i="",j={},k=[],l=0,m=0;return this.Exposure._request=function(){var a={page:d,entry_type:1,entry_id:window.pg&&window.pg.brandId||"-99",special_id:"-99",item_list:k.join(","),browse_length:l.toString(),browse_time:m.toString(),expose_time:Mar.Util.getTimeSpan().toString(),page_number:e,platform:i},b=Mar.stringify(a);Mar.Seed.requestUsePath("/y","","",h,"",b),j={},k=[],l=0,m=0},this.Exposure.afterGetData=function(){k.length>10&&this._request()},this.Exposure.startTimer=function(){var b=this;a=setInterval(function(){k.length>0&&b._request()},2e3)},this.Exposure.endTimer=function(){clearInterval(a)},this.Exposure.getItemByArrModule=function(a,b){var d={key:"",val:""},f=[];if(c=""==c?a[0]:c,""==c)return d;switch(i=c,c){case"pc":switch(a[1]){case"brands":f.push(0),f.push(a[2]?a[2]:""),f.push(a[4]?a[4].replace("_","."):"");break;case"products":f.push(1),f.push(a[2]?a[2]:""),f.push(a[4]?a[4].replace("_","."):""),e=a[3]}}return d.key=f[1]+"&"+f[2],d.val=f.join("_"),d},this.Exposure.getDataList=function(a,b){var c=this;$("[mars_exposure_sead]").each(function(d){var e=$(this),f=e.offset().top+e.height()/2;if(f>a&&f<=b){var g=e.attr("mars_exposure_module");if(!g)return;g=g.split("|");var i=c.getItemByArrModule(g,d);""!=i.key&&void 0==j[i.key]&&(j[i.key]=i.val,k.push(i.val)),h=e.attr("mars_exposure_sead")}})},this.Exposure.getData=function(b,c,d){var e=this;if(!f){f=!0,a&&e.endTimer(),g=Mar.Util.getTimeSpanMillisecond(),$("[mars_container_slice]").length?$("[mars_container_slice]").each(function(a){var b=$(this),f=b.offset().top;f+b.height()>c&&f<=d&&e.getDataList(c,d)}):e.getDataList(c,d);l+=Math.abs(this.lastTop-d),m+=Math.abs(this.lastDate-g),e.afterGetData(),e.startTimer(),e.lastScrollTop=b,e.lastTop=d,e.lastDate=g,f=!1}},this.Exposure.getWinHeight=function(){return $(window).height()},this.Exposure.getScroll=function(){return self.pageYOffset?self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body?document.body.scrollTop:void 0},this.Exposure.init=function(){var a=this;this.lastTop=0,this.lastScrollTop=this.getScroll(),this.lastDate=Mar.Util.getTimeSpanMillisecond();var b;$(window).on("scroll.mars",Mar.Util.Debounce(function(){b&&clearTimeout(b),a.onScroll()},300)),b=setTimeout(function(){var b=a.getScroll(),c=b+a.getWinHeight();a.getData(b,b,c)},2e3)},this.Exposure.onScroll=function(){var a,b,c=this,d=c.getScroll();if(d>this.lastScrollTop)a=this.lastTop,b=d+this.getWinHeight();else{if(!(d<this.lastScrollTop))return;a=d,b=this.lastScrollTop}this.getData(d,a,b)},this.Exposure.request=function(b){function c(a,b){var c=d.getItemByArrModule(a,b);""!=c.key&&void 0==j[c.key]&&(j[c.key]=c.val,k.push(c.val))}var d=this;if(!f){if(f=!0,a&&d.endTimer(),g=Mar.Util.getTimeSpanMillisecond(),"string"==typeof b)c(b.split("|"),0);else for(var e=0,h=b.length;e<h;e++)c(b[e].split("|"),e);this.afterGetData(),d.startTimer(),d.lastDate=g,f=!1}},$(document).ready(function(){b.Exposure.init()}),this.Exposure.startTimer(),Mar},Mar.SaleAttribution={init:function(){return $.Listeners&&$.Listeners.sub("cart.add.mars").onsuccess(function(a){a&&Mar.Seed.request("a","click","te_buy_cart_btn",{brand_id:a.brand_id,goods_id:a.goods_id,scene_id:a.scene_id})}),Mar}},function(){Mar.PV().Report().Screen().Links().Performance().Var().Banner().Recommend().Exposure(),Mar.Seed.init().SaleAttribution.init()}();